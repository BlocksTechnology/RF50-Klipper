[gcode_macro TEMP_CHECK]
description: Check temperature on the nozzle, heat the nozzle if needed 
gcode: 
    {% set T = params.T|default(200)|float %}
    {% set garantee = params.G|default(0)|float %}
    {% if printer.extruder.target !=0 and garantee == 1 %}
      {% if printer.extruder.temperature < printer.extruder.target %}
        M109 S{printer.extruder.target|float}
        {action_respond_info("Waiting to reach target temperature: %d."%(printer.extruder.target|float))}
      {% endif %}
    {% else %}
      {% if printer.extruder.target < T %}
        M109 S{T}
      {% endif %}
    {% endif %}
    {% if garantee == 1 %}
      M109 S{T}
    {% endif %}


[gcode_macro COOLDOWN]
gcode: 
    SET_FAN_SPEED FAN=Part_Cooling_Fan SPEED=1
    SET_FAN_SPEED FAN=Auxiliary_Cooling_Fans SPEED=1
    SET_FAN_SPEED FAN=CHAMBER_EXHAUST SPEED=1
